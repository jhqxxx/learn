<!--
 * @Author: jhq
 * @Date: 2023-02-23 13:45:15
 * @LastEditTime: 2023-03-29 20:17:37
 * @Description: 
-->

相机深度Zc*像素坐标Px = 相机内参K*相机外参RT*世界坐标Pw

相机内参矩阵：
    [fx 0 cx]
    [0 fy cy]
    [0  0  1]
    fx,fy指相机在x轴和y轴上的焦距，cx,cy是相机的光圈中心
    焦距：平行光透过镜片汇聚到一点，这一点到镜面中心的距离叫焦距。这一点到成像平面的距离叫像距。
        焦距越短，视角越宽广，取景范围越大，单个物体成像越小
    光圈：相对通光口径，控制进入镜头的光线强度


外参：平移矩阵：tvec， 旋转矩阵：rvec, 相机畸变参数

2dto3d:
    相机内参：camera_matrix, 平移矩阵：tvec， 旋转矩阵：rvec
    (R T, 0 1)矩阵
    Trans = np.hstack((rvec, [[tvec[0]], [tvec[1]], [tvec[2]]]))
    相机内参和外参矩阵相乘
    temp = np.dot(camera_matric, Trans)
    求逆矩阵：
    Pp = np.linalg.pinv(temp)
    像素坐标
    p1 = np.array([u, v, 1])  
    求世界坐标：
    X = np.dot(Pp, p1)
    X = x[:3] / x[3] 与Zc相除，得到世界坐标系的某个点


多视角2d点，如何生成3d点，计算过程？？ SVD??
两个RGB摄像头，如何模拟深度摄像机？？ 
    1. 相机标定：
        单相机的内参标定：获取相机的焦距、光心、畸变系数等
        双目相机的外参标定，获取双目相机之间的相机坐标系的旋转、平移关系
    2. 立体校正：
        根据相机标定结果，对两个相机采集到的原图像进行校正，校正后的两张图像位于同一平面且互相平行，即图像的对应像素共线
    3. 立体匹配：根据立体校正后的图像，进行像素点的匹配，匹配成功的点表示真实世界中的某点在这两个图像中的不同位置
        匹配代价计算：衡量待匹配像素与候选像素之间的相关性，一般只考虑局部信息，方法：灰度绝对值差/和，归一化相关系数，互信息法，Census变换，Rank变换，BT法...
        代价聚合：建立邻接像素之间的联系，对代价矩阵进行优化，方法：扫描线法，动态规划法，SGM算法...
        视差计算：通过代价聚合之后的代价矩阵S来确定每个像素的最优视差值，通过使用赢家通吃法来计算，某个像素的所有视差下的代价值中，选择最小代价值所对应的视差作为最优视差
        视差优化：对上一步得到的视差图进行进一步优化，改善视差图的质量，包括剔除错误视差，适当平滑以及子像素进度优化等，方法：中值滤波，双边滤波...
    4. 深度计算：根据立体匹配结果的到的视差图，通过视差图计算每个像素对应的深度，从而获得深度图
NeRF
SFM
SDF
逆向渲染
可微渲染
3DMoma